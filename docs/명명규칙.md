# ëª…ëª…ê·œì¹™ ê°€ì´ë“œ

## ëª©ì°¨
1. [ê°œìš”](#1-ê°œìš”)
2. [Rest Controller ëª…ëª…ê·œì¹™](#2-rest-controller-ëª…ëª…ê·œì¹™)
   - 2.1. [Controller í´ë˜ìŠ¤ ëª…ëª…](#21-controller-í´ë˜ìŠ¤-ëª…ëª…)
   - 2.2. [HTTP Method ë§¤í•‘](#22-http-method-ë§¤í•‘)
   - 2.3. [GET ë©”ì„œë“œ ìƒì„¸ ê·œì¹™](#23-get-ë©”ì„œë“œ-ìƒì„¸-ê·œì¹™)
   - 2.4. [POST ë©”ì„œë“œ ê·œì¹™](#24-post-ë©”ì„œë“œ-ê·œì¹™)
   - 2.5. [PUT/PATCH ë©”ì„œë“œ ê·œì¹™](#25-putpatch-ë©”ì„œë“œ-ê·œì¹™)
   - 2.6. [DELETE ë©”ì„œë“œ ê·œì¹™](#26-delete-ë©”ì„œë“œ-ê·œì¹™)
3. [ì•„í‚¤í…ì²˜ë³„ ëª…ëª…ê·œì¹™ ê´€ê³„](#3-ì•„í‚¤í…ì²˜ë³„-ëª…ëª…ê·œì¹™-ê´€ê³„)
   - 3.1. [Controller â†” DTO â†” Service â†” Entity â†” Repository](#31-controller--dto--service--entity--repository)
   - 3.2. [Controller â†” DTO â†” Service â†” Feign DTO â†” FeignClient](#32-controller--dto--service--feign-dto--feignclient)
4. [ì—…ë¬´ê·¸ë£¹ë³„ ë””ë ‰í† ë¦¬ êµ¬ì¡°](#4-ì—…ë¬´ê·¸ë£¹ë³„-ë””ë ‰í† ë¦¬-êµ¬ì¡°)
   - 4.1. [ë‚´ë¶€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§](#41-ë‚´ë¶€-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§)
   - 4.2. [ì™¸ë¶€ ì—°ë™ (FeignClient)](#42-ì™¸ë¶€-ì—°ë™-feignclient)
5. [DTO ëª…ëª…ê·œì¹™](#5-dto-ëª…ëª…ê·œì¹™)
   - 5.1. [ë‚´ë¶€ DTO](#51-ë‚´ë¶€-dto)
   - 5.2. [FeignClient DTO](#52-feignclient-dto)
6. [ì¢‹ì€ ì˜ˆì‹œ vs ë‚˜ìœ ì˜ˆì‹œ](#6-ì¢‹ì€-ì˜ˆì‹œ-vs-ë‚˜ìœ-ì˜ˆì‹œ)
7. [ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš© ì‚¬ë¡€](#7-ì‹¤ì œ-í”„ë¡œì íŠ¸-ì ìš©-ì‚¬ë¡€)

---

## 1. ê°œìš”

ë³¸ ëª…ëª…ê·œì¹™ì€ **AxportalBackend** í”„ë¡œì íŠ¸ì˜ ì¼ê´€ì„± ìˆëŠ” ì½”ë“œ ì‘ì„±ì„ ìœ„í•œ ê°€ì´ë“œë¼ì¸ì…ë‹ˆë‹¤.
Spring Boot 3.4.4 ê¸°ë°˜ì˜ RESTful API ê°œë°œì—ì„œ Controller, Service, Repository, Entity, DTO, FeignClient ê°„ì˜
ëª…ëª… ì¼ê´€ì„±ì„ í™•ë³´í•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

### í•µì‹¬ ì›ì¹™
- **ì¼ê´€ì„±**: ë™ì¼í•œ íŒ¨í„´ê³¼ ê·œì¹™ ì ìš©
- **ëª…í™•ì„±**: ì˜ë„ê°€ ëª…í™•íˆ ë“œëŸ¬ë‚˜ëŠ” ë„¤ì´ë°
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ìœ ì—°í•œ êµ¬ì¡°
- **í‘œì¤€í™”**: íŒ€ ë‚´ ê³µí†µ ê·œì¹™ ì¤€ìˆ˜

---

## 2. Rest Controller ëª…ëª…ê·œì¹™

### 2.1. Controller í´ë˜ìŠ¤ ëª…ëª…

#### ê¸°ë³¸ ê·œì¹™
```java
// âœ… ì¢‹ì€ ì˜ˆì‹œ
[ì—…ë¬´ê·¸ë£¹][ë„ë©”ì¸ëª…]Controller

// ì‹¤ì œ ì˜ˆì‹œ
public class SampleUserController        // ìƒ˜í”Œ ì‚¬ìš©ì ê´€ë¦¬
public class AuthController             // ì¸ì¦ ê´€ë¦¬
public class HealthController           // í—¬ìŠ¤ì²´í¬
```

#### ì—…ë¬´ê·¸ë£¹ë³„ Controller ëª…ëª…
```java
// âœ… ë‚´ë¶€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
public class UserController             // ì‚¬ìš©ì ê´€ë¦¬
public class OrderController            // ì£¼ë¬¸ ê´€ë¦¬
public class ProductController          // ìƒí’ˆ ê´€ë¦¬

// âœ… ê´€ë¦¬ ê¸°ëŠ¥
public class UserManagementController   // ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥
public class SystemManagementController // ì‹œìŠ¤í…œ ê´€ë¦¬ ê¸°ëŠ¥

// âŒ ë‚˜ìœ ì˜ˆì‹œ
public class UserCtrl                   // ì¶•ì•½í˜• ì‚¬ìš© ê¸ˆì§€
public class Users                      // Controller ì ‘ë¯¸ì‚¬ ëˆ„ë½
public class UserAPI                    // API ì ‘ë¯¸ì‚¬ ì‚¬ìš© ê¸ˆì§€
```

### 2.2. HTTP Method ë§¤í•‘

#### RequestMapping ê¸°ë³¸ êµ¬ì¡°
```java
@RestController
@RequestMapping("/api/v1/[ì—…ë¬´ê·¸ë£¹]/[ë¦¬ì†ŒìŠ¤ëª…]")
public class SampleUserController {
    
    // âœ… í‘œì¤€ íŒ¨í„´
    @GetMapping                         // ì „ì²´ ëª©ë¡ ì¡°íšŒ
    @GetMapping("/{id}")               // ë‹¨ê±´ ì¡°íšŒ
    @PostMapping                       // ìƒì„±
    @PutMapping("/{id}")              // ì „ì²´ ìˆ˜ì •
    @PatchMapping("/{id}")            // ë¶€ë¶„ ìˆ˜ì •
    @DeleteMapping("/{id}")           // ì‚­ì œ
}
```

### 2.3. GET ë©”ì„œë“œ ìƒì„¸ ê·œì¹™

#### 2.3.1. ì „ì²´ ëª©ë¡ ì¡°íšŒ
```java
// âœ… ê¸°ë³¸ ì „ì²´ ì¡°íšŒ (í˜ì´ì§•)
@GetMapping
public ResponseEntity<AxResponse<Page<SampleUserRes>>> getAllUsers(
    @PageableDefault(size = 20, sort = "createdAt", direction = Sort.Direction.DESC) 
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.getAllUsers(pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}

// âœ… ì „ì²´ ì¡°íšŒ (ë¦¬ìŠ¤íŠ¸)
@GetMapping("/list")
public ResponseEntity<AxResponse<List<SampleUserRes>>> getAllUsersList() {
    List<SampleUserRes> users = sampleUserService.getAllUsersList();
    return ResponseEntity.ok(AxResponse.success(users));
}
```

#### 2.3.2. ë‹¨ê±´ ì¡°íšŒ
```java
// âœ… IDë¡œ ë‹¨ê±´ ì¡°íšŒ
@GetMapping("/{id}")
public ResponseEntity<AxResponse<SampleUserRes>> getUserById(@PathVariable Long id) {
    SampleUserRes user = sampleUserService.getUserById(id);
    return ResponseEntity.ok(AxResponse.success(user));
}

// âœ… ìì—°í‚¤ë¡œ ë‹¨ê±´ ì¡°íšŒ
@GetMapping("/username/{username}")
public ResponseEntity<AxResponse<SampleUserRes>> getUserByUsername(@PathVariable String username) {
    SampleUserRes user = sampleUserService.getUserByUsername(username);
    return ResponseEntity.ok(AxResponse.success(user));
}

// âœ… ì´ë©”ì¼ë¡œ ë‹¨ê±´ ì¡°íšŒ
@GetMapping("/email/{email}")
public ResponseEntity<AxResponse<SampleUserRes>> getUserByEmail(@PathVariable String email) {
    SampleUserRes user = sampleUserService.getUserByEmail(email);
    return ResponseEntity.ok(AxResponse.success(user));
}
```

#### 2.3.3. ë‹¨ìˆ˜ ì¡°ê±´ ê²€ìƒ‰
```java
// âœ… ìƒíƒœë³„ ì¡°íšŒ
@GetMapping("/status/{status}")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> getUsersByStatus(
    @PathVariable SampleUser.UserStatus status,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.getUsersByStatus(status, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}

// âœ… ì—­í• ë³„ ì¡°íšŒ
@GetMapping("/role/{role}")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> getUsersByRole(
    @PathVariable String role,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.getUsersByRole(role, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}

// âœ… ë‚ ì§œ ë²”ìœ„ ì¡°íšŒ
@GetMapping("/created-date")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> getUsersByCreatedDate(
    @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate startDate,
    @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate endDate,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.getUsersByCreatedDateBetween(startDate, endDate, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}
```

#### 2.3.4. ë³µìˆ˜ ì¡°ê±´ ê²€ìƒ‰
```java
// âœ… ë³µí•© ê²€ìƒ‰ (QueryParam ë°©ì‹)
@GetMapping("/search")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> searchUsers(
    @RequestParam(required = false) String username,
    @RequestParam(required = false) String email,
    @RequestParam(required = false) SampleUser.UserStatus status,
    @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate startDate,
    @RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate endDate,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.searchUsers(username, email, status, startDate, endDate, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}

// âœ… ë³µí•© ê²€ìƒ‰ (RequestBody ë°©ì‹ - ë³µì¡í•œ ì¡°ê±´)
@PostMapping("/search")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> searchUsersAdvanced(
    @Valid @RequestBody SampleUserSearchReq searchReq,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.searchUsersAdvanced(searchReq, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}

// âœ… í‚¤ì›Œë“œ ê²€ìƒ‰
@GetMapping("/keyword")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> searchUsersByKeyword(
    @RequestParam String keyword,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.searchUsersByKeyword(keyword, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}
```

#### 2.3.5. í†µê³„ ë° ì§‘ê³„ ì¡°íšŒ
```java
// âœ… ê°œìˆ˜ ì¡°íšŒ
@GetMapping("/count")
public ResponseEntity<AxResponse<Long>> getUserCount() {
    Long count = sampleUserService.getUserCount();
    return ResponseEntity.ok(AxResponse.success(count));
}

// âœ… ìƒíƒœë³„ í†µê³„
@GetMapping("/statistics/status")
public ResponseEntity<AxResponse<Map<String, Long>>> getUserStatisticsByStatus() {
    Map<String, Long> statistics = sampleUserService.getUserStatisticsByStatus();
    return ResponseEntity.ok(AxResponse.success(statistics));
}

// âœ… ì¡´ì¬ ì—¬ë¶€ í™•ì¸
@GetMapping("/exists/username/{username}")
public ResponseEntity<AxResponse<Boolean>> existsByUsername(@PathVariable String username) {
    Boolean exists = sampleUserService.existsByUsername(username);
    return ResponseEntity.ok(AxResponse.success(exists));
}
```

### 2.4. POST ë©”ì„œë“œ ê·œì¹™

#### 2.4.1. ê¸°ë³¸ ìƒì„±
```java
// âœ… ë‹¨ê±´ ìƒì„±
@PostMapping
public ResponseEntity<AxResponse<SampleUserRes>> createUser(
    @Valid @RequestBody SampleUserCreateReq request) {
    
    SampleUserRes user = sampleUserService.createUser(request);
    return ResponseEntity.status(HttpStatus.CREATED)
        .body(AxResponse.success(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ë°°ì¹˜ ìƒì„±
@PostMapping("/batch")
public ResponseEntity<AxResponse<List<SampleUserRes>>> createUsers(
    @Valid @RequestBody List<SampleUserCreateReq> requests) {
    
    List<SampleUserRes> users = sampleUserService.createUsers(requests);
    return ResponseEntity.status(HttpStatus.CREATED)
        .body(AxResponse.success(users, "ì‚¬ìš©ìë“¤ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."));
}
```

#### 2.4.2. íŠ¹ìˆ˜ ì•¡ì…˜
```java
// âœ… ì‚¬ìš©ì í™œì„±í™”
@PostMapping("/{id}/activate")
public ResponseEntity<AxResponse<SampleUserRes>> activateUser(@PathVariable Long id) {
    SampleUserRes user = sampleUserService.activateUser(id);
    return ResponseEntity.ok(AxResponse.success(user, "ì‚¬ìš©ìê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
@PostMapping("/{id}/reset-password")
public ResponseEntity<AxResponse<Void>> resetPassword(@PathVariable Long id) {
    sampleUserService.resetPassword(id);
    return ResponseEntity.ok(AxResponse.success(null, "ë¹„ë°€ë²ˆí˜¸ê°€ ì¬ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ë³µí•© ê²€ìƒ‰ (GETìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ë³µì¡í•œ ì¡°ê±´)
@PostMapping("/search")
public ResponseEntity<AxResponse<Page<SampleUserRes>>> searchUsers(
    @Valid @RequestBody SampleUserSearchReq searchReq,
    Pageable pageable) {
    
    Page<SampleUserRes> users = sampleUserService.searchUsers(searchReq, pageable);
    return ResponseEntity.ok(AxResponse.success(users));
}
```

### 2.5. PUT/PATCH ë©”ì„œë“œ ê·œì¹™

#### 2.5.1. PUT (ì „ì²´ ìˆ˜ì •)
```java
// âœ… ì „ì²´ í•„ë“œ ìˆ˜ì •
@PutMapping("/{id}")
public ResponseEntity<AxResponse<SampleUserRes>> updateUser(
    @PathVariable Long id,
    @Valid @RequestBody SampleUserUpdateReq request) {
    
    SampleUserRes user = sampleUserService.updateUser(id, request);
    return ResponseEntity.ok(AxResponse.success(user, "ì‚¬ìš©ì ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ì „ì²´ êµì²´
@PutMapping("/{id}/replace")
public ResponseEntity<AxResponse<SampleUserRes>> replaceUser(
    @PathVariable Long id,
    @Valid @RequestBody SampleUserCreateReq request) {
    
    SampleUserRes user = sampleUserService.replaceUser(id, request);
    return ResponseEntity.ok(AxResponse.success(user, "ì‚¬ìš©ì ì •ë³´ê°€ êµì²´ë˜ì—ˆìŠµë‹ˆë‹¤."));
}
```

#### 2.5.2. PATCH (ë¶€ë¶„ ìˆ˜ì •)
```java
// âœ… íŠ¹ì • í•„ë“œë§Œ ìˆ˜ì •
@PatchMapping("/{id}")
public ResponseEntity<AxResponse<SampleUserRes>> patchUser(
    @PathVariable Long id,
    @Valid @RequestBody SampleUserPatchReq request) {
    
    SampleUserRes user = sampleUserService.patchUser(id, request);
    return ResponseEntity.ok(AxResponse.success(user, "ì‚¬ìš©ì ì •ë³´ê°€ ë¶€ë¶„ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ìƒíƒœ ë³€ê²½
@PatchMapping("/{id}/status")
public ResponseEntity<AxResponse<SampleUserRes>> updateUserStatus(
    @PathVariable Long id,
    @RequestParam SampleUser.UserStatus status) {
    
    SampleUserRes user = sampleUserService.updateUserStatus(id, status);
    return ResponseEntity.ok(AxResponse.success(user, "ì‚¬ìš©ì ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ì´ë©”ì¼ ë³€ê²½
@PatchMapping("/{id}/email")
public ResponseEntity<AxResponse<SampleUserRes>> updateUserEmail(
    @PathVariable Long id,
    @Valid @RequestBody SampleUserEmailUpdateReq request) {
    
    SampleUserRes user = sampleUserService.updateUserEmail(id, request);
    return ResponseEntity.ok(AxResponse.success(user, "ì´ë©”ì¼ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."));
}
```

### 2.6. DELETE ë©”ì„œë“œ ê·œì¹™

#### 2.6.1. ê¸°ë³¸ ì‚­ì œ
```java
// âœ… ë‹¨ê±´ ì‚­ì œ
@DeleteMapping("/{id}")
public ResponseEntity<AxResponse<Void>> deleteUser(@PathVariable Long id) {
    sampleUserService.deleteUser(id);
    return ResponseEntity.ok(AxResponse.success(null, "ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ë…¼ë¦¬ ì‚­ì œ
@DeleteMapping("/{id}/soft")
public ResponseEntity<AxResponse<Void>> softDeleteUser(@PathVariable Long id) {
    sampleUserService.softDeleteUser(id);
    return ResponseEntity.ok(AxResponse.success(null, "ì‚¬ìš©ìê°€ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤."));
}
```

#### 2.6.2. ë°°ì¹˜ ì‚­ì œ
```java
// âœ… ì—¬ëŸ¬ IDë¡œ ì‚­ì œ
@DeleteMapping("/batch")
public ResponseEntity<AxResponse<Void>> deleteUsers(@RequestBody List<Long> ids) {
    sampleUserService.deleteUsers(ids);
    return ResponseEntity.ok(AxResponse.success(null, "ì„ íƒëœ ì‚¬ìš©ìë“¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."));
}

// âœ… ì¡°ê±´ë¶€ ì‚­ì œ
@DeleteMapping("/inactive")
public ResponseEntity<AxResponse<Integer>> deleteInactiveUsers() {
    int deletedCount = sampleUserService.deleteInactiveUsers();
    return ResponseEntity.ok(AxResponse.success(deletedCount, 
        String.format("%dëª…ì˜ ë¹„í™œì„± ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.", deletedCount)));
}
```

---

## 3. ì•„í‚¤í…ì²˜ë³„ ëª…ëª…ê·œì¹™ ê´€ê³„

### 3.1. Controller â†” DTO â†” Service â†” Entity â†” Repository

#### ì™„ì „í•œ ì•„í‚¤í…ì²˜ ëª…ëª… ì²´ê³„
```mermaid
graph TD
    A[SampleUserController] --> B[SampleUserCreateReq]
    A --> C[SampleUserRes]
    A --> D[SampleUserService]
    D --> E[SampleUser Entity]
    D --> F[SampleUserRepository]
    
    B --> D
    C --> D
    D --> G[SampleUserMapper]
    G --> E
```

#### 3.1.1. ì‹¤ì œ ëª…ëª… ê´€ê³„
```java
// âœ… ì™„ì „í•œ ì•„í‚¤í…ì²˜ ì˜ˆì‹œ

// 1. Controller
@RestController
@RequestMapping("/api/v1/sample/users")
public class SampleUserController {
    private final SampleUserService sampleUserService;
    
    @PostMapping
    public ResponseEntity<AxResponse<SampleUserRes>> createUser(
        @Valid @RequestBody SampleUserCreateReq request) {
        SampleUserRes user = sampleUserService.createUser(request);
        return ResponseEntity.status(HttpStatus.CREATED).body(AxResponse.success(user));
    }
}

// 2. Request DTO
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)
public class SampleUserCreateReq {
    @NotBlank(message = "ì‚¬ìš©ìëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String username;
    
    @Email(message = "ìœ íš¨í•œ ì´ë©”ì¼ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤")
    private String email;
}

// 3. Response DTO
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)
public class SampleUserRes {
    private Long id;
    private String username;
    private String email;
    private SampleUser.UserStatus status;
    private LocalDateTime createdAt;
}

// 4. Service
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class SampleUserService {
    private final SampleUserRepository sampleUserRepository;
    private final SampleUserMapper sampleUserMapper;
    
    @Transactional
    public SampleUserRes createUser(SampleUserCreateReq request) {
        SampleUser user = sampleUserMapper.toEntity(request);
        SampleUser savedUser = sampleUserRepository.save(user);
        return sampleUserMapper.toResponse(savedUser);
    }
}

// 5. Entity
@Entity
@Table(name = "sample_users")
@Getter
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@AllArgsConstructor
@Builder
public class SampleUser extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "username", nullable = false, unique = true)
    private String username;
    
    @Column(name = "email", nullable = false, unique = true)
    private String email;
    
    @Enumerated(EnumType.STRING)
    @Column(name = "status")
    private UserStatus status;
    
    public enum UserStatus {
        ACTIVE, INACTIVE, SUSPENDED
    }
}

// 6. Repository
@Repository
public interface SampleUserRepository extends JpaRepository<SampleUser, Long> {
    Optional<SampleUser> findByUsername(String username);
    Optional<SampleUser> findByEmail(String email);
    Page<SampleUser> findByStatus(SampleUser.UserStatus status, Pageable pageable);
}

// 7. Mapper (MapStruct)
@Mapper(componentModel = "spring")
public interface SampleUserMapper {
    SampleUser toEntity(SampleUserCreateReq request);
    SampleUserRes toResponse(SampleUser entity);
    List<SampleUserRes> toResponseList(List<SampleUser> entities);
}
```

### 3.2. Controller â†” DTO â†” Service â†” Feign DTO â†” FeignClient

#### ì™¸ë¶€ ì—°ë™ ì•„í‚¤í…ì²˜ ëª…ëª… ì²´ê³„
```mermaid
graph TD
    A[AuthController] --> B[LoginReq]
    A --> C[LoginRes]
    A --> D[AuthService]
    D --> E[SktAxAuthClient]
    E --> F[BodyLoginAccessTokenApiV1AuthLoginPost]
    E --> G[AccessTokenResponseWithProject]
    
    D --> H[AuthMapper]
    H --> B
    H --> C
    H --> F
    H --> G
```

#### 3.2.1. ì‹¤ì œ ì™¸ë¶€ ì—°ë™ ëª…ëª… ê´€ê³„
```java
// âœ… ì™¸ë¶€ ì—°ë™ ì™„ì „í•œ ì•„í‚¤í…ì²˜ ì˜ˆì‹œ

// 1. Controller (ë‚´ë¶€)
@RestController
@RequestMapping("/api/v1/auth")
public class AuthController {
    private final AuthService authService;
    
    @PostMapping("/login")
    public ResponseEntity<AxResponse<LoginRes>> login(
        @Valid @RequestBody LoginReq request) {
        LoginRes response = authService.login(request);
        return ResponseEntity.ok(AxResponse.success(response));
    }
}

// 2. Request DTO (ë‚´ë¶€)
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class LoginReq {
    @NotBlank(message = "ì‚¬ìš©ìëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String username;
    
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String password;
}

// 3. Response DTO (ë‚´ë¶€)
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class LoginRes {
    private String accessToken;
    private String refreshToken;
    private Long expiresIn;
    private UserInfo userInfo;
}

// 4. Service (ë‚´ë¶€)
@Service
@RequiredArgsConstructor
public class AuthService {
    private final SktAxAuthClient sktAxAuthClient;
    private final AuthMapper authMapper;
    
    public LoginRes login(LoginReq request) {
        // ë‚´ë¶€ DTO -> Feign DTO ë³€í™˜
        BodyLoginAccessTokenApiV1AuthLoginPost feignRequest = 
            authMapper.toFeignRequest(request);
        
        // ì™¸ë¶€ API í˜¸ì¶œ
        AccessTokenResponseWithProject feignResponse = 
            sktAxAuthClient.loginAccessToken(feignRequest);
        
        // Feign DTO -> ë‚´ë¶€ DTO ë³€í™˜
        return authMapper.toResponse(feignResponse);
    }
}

// 5. FeignClient
@FeignClient(
    name = "sktax-auth-client",
    url = "https://aip-stg.sktai.io",
    configuration = SktAxFeignConfig.class
)
public interface SktAxAuthClient {
    @PostMapping(value = "/api/v1/auth/login", 
                 consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)
    AccessTokenResponseWithProject loginAccessToken(
        @RequestBody BodyLoginAccessTokenApiV1AuthLoginPost loginRequest
    );
}

// 6. Feign Request DTO
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)
public class BodyLoginAccessTokenApiV1AuthLoginPost {
    private String username;
    private String password;
    private String grantType;
}

// 7. Feign Response DTO
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)
public class AccessTokenResponseWithProject {
    private String accessToken;
    private String tokenType;
    private Long expiresIn;
    private String refreshToken;
    private ProjectInfo project;
}

// 8. Mapper (ë‚´ë¶€ â†” Feign DTO ë³€í™˜)
@Mapper(componentModel = "spring")
public interface AuthMapper {
    BodyLoginAccessTokenApiV1AuthLoginPost toFeignRequest(LoginReq request);
    LoginRes toResponse(AccessTokenResponseWithProject feignResponse);
}
```

---

## 4. ì—…ë¬´ê·¸ë£¹ë³„ ë””ë ‰í† ë¦¬ êµ¬ì¡°

### 4.1. ë‚´ë¶€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

#### 4.1.1. í‘œì¤€ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
src/main/java/com/skax/aiplatform/
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ auth/                    # ì¸ì¦ ê´€ë ¨
â”‚   â”‚   â””â”€â”€ AuthController.java
â”‚   â”œâ”€â”€ user/                    # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ UserController.java
â”‚   â”‚   â””â”€â”€ UserManagementController.java
â”‚   â”œâ”€â”€ order/                   # ì£¼ë¬¸ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ OrderController.java
â”‚   â”‚   â””â”€â”€ OrderHistoryController.java
â”‚   â”œâ”€â”€ product/                 # ìƒí’ˆ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ ProductController.java
â”‚   â”œâ”€â”€ sample/                  # ìƒ˜í”Œ/ë°ëª¨
â”‚   â”‚   â””â”€â”€ SampleUserController.java
â”‚   â””â”€â”€ common/                  # ê³µí†µ ê¸°ëŠ¥
â”‚       â”œâ”€â”€ HealthController.java
â”‚       â””â”€â”€ CorsTestController.java
â”‚
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginReq.java
â”‚   â”‚   â”‚   â””â”€â”€ SignupReq.java
â”‚   â”‚   â””â”€â”€ response/
â”‚   â”‚       â”œâ”€â”€ LoginRes.java
â”‚   â”‚       â””â”€â”€ TokenRes.java
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”‚   â”œâ”€â”€ UserCreateReq.java
â”‚   â”‚   â”‚   â”œâ”€â”€ UserUpdateReq.java
â”‚   â”‚   â”‚   â””â”€â”€ UserSearchReq.java
â”‚   â”‚   â””â”€â”€ response/
â”‚   â”‚       â”œâ”€â”€ UserRes.java
â”‚   â”‚       â””â”€â”€ UserSummaryRes.java
â”‚   â””â”€â”€ order/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â”œâ”€â”€ OrderCreateReq.java
â”‚       â”‚   â””â”€â”€ OrderUpdateReq.java
â”‚       â””â”€â”€ response/
â”‚           â”œâ”€â”€ OrderRes.java
â”‚           â””â”€â”€ OrderDetailRes.java
â”‚
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â””â”€â”€ AuthService.java
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â””â”€â”€ UserService.java
â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â””â”€â”€ OrderService.java
â”‚   â””â”€â”€ sample/
â”‚       â””â”€â”€ SampleUserService.java
â”‚
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â””â”€â”€ Role.java
â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â”œâ”€â”€ Order.java
â”‚   â”‚   â””â”€â”€ OrderItem.java
â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â””â”€â”€ Product.java
â”‚   â””â”€â”€ sample/
â”‚       â””â”€â”€ SampleUser.java
â”‚
â””â”€â”€ repository/
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ UserRepository.java
    â”‚   â””â”€â”€ RoleRepository.java
    â”œâ”€â”€ order/
    â”‚   â”œâ”€â”€ OrderRepository.java
    â”‚   â””â”€â”€ OrderItemRepository.java
    â””â”€â”€ sample/
        â””â”€â”€ SampleUserRepository.java
```

### 4.2. ì™¸ë¶€ ì—°ë™ (FeignClient)

#### 4.2.1. SKTAX ì—°ë™ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
src/main/java/com/skax/aiplatform/client/sktax/
â”œâ”€â”€ config/                      # ê³µí†µ ì„¤ì •
â”‚   â””â”€â”€ SktAxFeignConfig.java
â”œâ”€â”€ intercept/                   # ê³µí†µ ì¸í„°ì…‰í„°
â”‚   â””â”€â”€ SktAxRequestInterceptor.java
â”‚
â”œâ”€â”€ auth/                        # ì¸ì¦ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ SktAxAuthClient.java
â”‚   â”œâ”€â”€ SktAxAuthUsersClient.java
â”‚   â”œâ”€â”€ SktAxAuthRolesClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â”œâ”€â”€ BodyLoginAccessTokenApiV1AuthLoginPost.java
â”‚       â”‚   â””â”€â”€ UserCreateRequest.java
â”‚       â”œâ”€â”€ response/
â”‚       â”‚   â”œâ”€â”€ AccessTokenResponse.java
â”‚       â”‚   â”œâ”€â”€ AccessTokenResponseWithProject.java
â”‚       â”‚   â””â”€â”€ UserResponse.java
â”‚       â””â”€â”€ [ê¸°íƒ€ ê³µí†µ DTO]
â”‚           â”œâ”€â”€ SystemLoginPayload.java
â”‚           â””â”€â”€ ValidationError.java
â”‚
â”œâ”€â”€ modelgateway/                # ëª¨ë¸ ê²Œì´íŠ¸ì›¨ì´
â”‚   â”œâ”€â”€ ChatClient.java
â”‚   â”œâ”€â”€ CompletionsClient.java
â”‚   â”œâ”€â”€ EmbeddingsClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â”œâ”€â”€ ChatCompletionRequest.java
â”‚       â”‚   â””â”€â”€ EmbeddingRequest.java
â”‚       â””â”€â”€ response/
â”‚           â”œâ”€â”€ ChatCompletionResponse.java
â”‚           â””â”€â”€ EmbeddingResponse.java
â”‚
â”œâ”€â”€ history/                     # íˆìŠ¤í† ë¦¬ ê´€ë¦¬
â”‚   â”œâ”€â”€ HistoryManagementClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ HistorySearchRequest.java
â”‚       â””â”€â”€ response/
â”‚           â”œâ”€â”€ ModelHistoryRes.java
â”‚           â””â”€â”€ AgentHistoryRes.java
â”‚
â”œâ”€â”€ serving/                     # ì„œë¹™ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ ServingClient.java
â”‚   â”œâ”€â”€ AgentServingClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â”œâ”€â”€ ServingRequest.java
â”‚       â”‚   â””â”€â”€ AgentServingRequest.java
â”‚       â””â”€â”€ response/
â”‚           â”œâ”€â”€ ServingResponse.java
â”‚           â””â”€â”€ AgentServingResponse.java
â”‚
â”œâ”€â”€ resource/                    # ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
â”‚   â”œâ”€â”€ ResourceClient.java
â”‚   â”œâ”€â”€ ResourceManagementClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ ResourceCreateRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ ResourceResponse.java
â”‚
â”œâ”€â”€ evaluation/                  # í‰ê°€ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ EvaluationClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ EvaluationRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ EvaluationResponse.java
â”‚
â”œâ”€â”€ finetuning/                  # íŒŒì¸íŠœë‹
â”‚   â”œâ”€â”€ FinetuningClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ FinetuningRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ FinetuningResponse.java
â”‚
â”œâ”€â”€ data/                        # ë°ì´í„° ê´€ë¦¬
â”‚   â”œâ”€â”€ DataClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ DataRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ DataResponse.java
â”‚
â”œâ”€â”€ knowledge/                   # ì§€ì‹ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ KnowledgeClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ KnowledgeRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ KnowledgeResponse.java
â”‚
â”œâ”€â”€ safetyfilter/               # ì•ˆì „ í•„í„°
â”‚   â”œâ”€â”€ SafetyFilterClient.java
â”‚   â”œâ”€â”€ SafetyCheckClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ SafetyCheckRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ SafetyCheckResponse.java
â”‚
â”œâ”€â”€ agent/                      # ì—ì´ì „íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ AgentClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ AgentRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ AgentResponse.java
â”‚
â”œâ”€â”€ agentgateway/               # ì—ì´ì „íŠ¸ ê²Œì´íŠ¸ì›¨ì´
â”‚   â”œâ”€â”€ AgentGatewayClient.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â””â”€â”€ AgentGatewayRequest.java
â”‚       â””â”€â”€ response/
â”‚           â””â”€â”€ AgentGatewayResponse.java
â”‚
â””â”€â”€ model/                      # ëª¨ë¸ ê´€ë¦¬
    â”œâ”€â”€ ModelClient.java
    â””â”€â”€ dto/
        â”œâ”€â”€ request/
        â”‚   â””â”€â”€ ModelRequest.java
        â””â”€â”€ response/
            â””â”€â”€ ModelResponse.java
```

---

## 5. DTO ëª…ëª…ê·œì¹™

### 5.1. ë‚´ë¶€ DTO

#### 5.1.1. Request DTO ëª…ëª…ê·œì¹™
```java
// âœ… ê¸°ë³¸ ìƒì„± ìš”ì²­
public class UserCreateReq {
    // ì‚¬ìš©ì ìƒì„±ì— í•„ìš”í•œ í•„ë“œë“¤
}

// âœ… ìˆ˜ì • ìš”ì²­
public class UserUpdateReq {
    // ì‚¬ìš©ì ìˆ˜ì •ì— í•„ìš”í•œ í•„ë“œë“¤
}

// âœ… ë¶€ë¶„ ìˆ˜ì • ìš”ì²­
public class UserPatchReq {
    // ë¶€ë¶„ ìˆ˜ì •ì— í•„ìš”í•œ í•„ë“œë“¤ (Optional í•„ë“œë“¤)
}

// âœ… ê²€ìƒ‰ ìš”ì²­
public class UserSearchReq {
    // ê²€ìƒ‰ ì¡°ê±´ í•„ë“œë“¤
}

// âœ… íŠ¹ìˆ˜ ì•¡ì…˜ ìš”ì²­
public class UserPasswordResetReq {
    // ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ì— í•„ìš”í•œ í•„ë“œë“¤
}

public class UserEmailUpdateReq {
    // ì´ë©”ì¼ ë³€ê²½ì— í•„ìš”í•œ í•„ë“œë“¤
}

// âŒ ë‚˜ìœ ì˜ˆì‹œ
public class UserRequest          // ìš©ë„ê°€ ë¶ˆë¶„ëª…
public class CreateUserRequest    // ìˆœì„œê°€ ë¶€ìì—°ìŠ¤ëŸ¬ì›€
public class UserReq             // ì¶•ì•½í˜•ì´ì§€ë§Œ Requestë³´ë‹¤ Req ì„ í˜¸
public class UserDto             // ìš©ë„ êµ¬ë¶„ ë¶ˆê°€
```

#### 5.1.2. Response DTO ëª…ëª…ê·œì¹™
```java
// âœ… ê¸°ë³¸ ì‘ë‹µ
public class UserRes {
    // ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ ì‘ë‹µ
}

// âœ… ìƒì„¸ ì‘ë‹µ
public class UserDetailRes {
    // ì‚¬ìš©ì ìƒì„¸ ì •ë³´ ì‘ë‹µ (ì—°ê´€ ë°ì´í„° í¬í•¨)
}

// âœ… ìš”ì•½ ì‘ë‹µ
public class UserSummaryRes {
    // ì‚¬ìš©ì ìš”ì•½ ì •ë³´ ì‘ë‹µ (ìµœì†Œ í•„ë“œ)
}

// âœ… ëª©ë¡ìš© ì‘ë‹µ
public class UserListRes {
    // ëª©ë¡ ì¡°íšŒì‹œ ì‚¬ìš©í•˜ëŠ” ì‘ë‹µ (ì¤‘ê°„ ìˆ˜ì¤€ í•„ë“œ)
}

// âœ… í†µê³„ ì‘ë‹µ
public class UserStatisticsRes {
    // ì‚¬ìš©ì í†µê³„ ì •ë³´ ì‘ë‹µ
}

// âŒ ë‚˜ìœ ì˜ˆì‹œ
public class UserResponse         // Responseë³´ë‹¤ Res ì„ í˜¸
public class UserDTO             // ìš©ë„ êµ¬ë¶„ ë¶ˆê°€
public class User                // Entityì™€ í˜¼ë™
```

### 5.2. FeignClient DTO

#### 5.2.1. OpenAPI ëª…ì„¸ ê¸°ë°˜ ëª…ëª…
```java
// âœ… OpenAPI operationId ê¸°ë°˜ Request DTO
// operationId: "login_access_token_api_v1_auth_login_post"
public class BodyLoginAccessTokenApiV1AuthLoginPost {
    private String username;
    private String password;
    private String grantType;
}

// âœ… OpenAPI ìŠ¤í‚¤ë§ˆëª… ê¸°ë°˜ Response DTO
// schema: "AccessTokenResponseWithProject"
public class AccessTokenResponseWithProject {
    private String accessToken;
    private String tokenType;
    private Long expiresIn;
    private String refreshToken;
    private ProjectInfo project;
}

// âœ… OpenAPI ìŠ¤í‚¤ë§ˆëª… ê·¸ëŒ€ë¡œ ì‚¬ìš©
public class ValidationError {
    private List<String> loc;
    private String msg;
    private String type;
}

public class HTTPValidationError {
    private List<ValidationError> detail;
}
```

#### 5.2.2. ë””ë ‰í† ë¦¬ë³„ ë¶„ë¥˜ ê·œì¹™
```java
// âœ… Request DTO (íŒŒì¼ëª…ì— Request, Req, request, req í¬í•¨)
// ìœ„ì¹˜: /client/sktax/[ì—…ë¬´ê·¸ë£¹]/dto/request/
public class ChatCompletionRequest { }
public class EmbeddingReq { }
public class BodyLoginAccessTokenApiV1AuthLoginPost { } // íŠ¹ìˆ˜í•œ ê²½ìš°

// âœ… Response DTO (íŒŒì¼ëª…ì— Response, Res, response, res í¬í•¨)
// ìœ„ì¹˜: /client/sktax/[ì—…ë¬´ê·¸ë£¹]/dto/response/
public class ChatCompletionResponse { }
public class AccessTokenRes { }
public class ModelHistoryRes { }

// âœ… ê¸°íƒ€ ê³µí†µ DTO (request/response í‚¤ì›Œë“œ ì—†ìŒ)
// ìœ„ì¹˜: /client/sktax/[ì—…ë¬´ê·¸ë£¹]/dto/
public class ValidationError { }      // ì—ëŸ¬ ì •ë³´
public class Pagination { }          // í˜ì´ì§• ì •ë³´
public class ProjectInfo { }         // í”„ë¡œì íŠ¸ ì •ë³´
public class SystemLoginPayload { }  // ì‹œìŠ¤í…œ ë¡œê·¸ì¸ í˜ì´ë¡œë“œ

// âœ… Enum DTO
// ìœ„ì¹˜: /client/sktax/[ì—…ë¬´ê·¸ë£¹]/dto/
public enum ValidTagTypeEnum {
    TYPE1, TYPE2, TYPE3
}
```

---

## 6. ì¢‹ì€ ì˜ˆì‹œ vs ë‚˜ìœ ì˜ˆì‹œ

### 6.1. Controller ëª…ëª…

#### âœ… ì¢‹ì€ ì˜ˆì‹œ
```java
// ì—…ë¬´ ë„ë©”ì¸ì´ ëª…í™•í•œ Controller
@RestController
@RequestMapping("/api/v1/users")
public class UserController {
    
    // HTTP ë©”ì„œë“œì™€ URLì´ RESTfulí•˜ê²Œ ë§¤ì¹­
    @GetMapping                        // GET /api/v1/users
    @GetMapping("/{id}")              // GET /api/v1/users/{id}
    @PostMapping                      // POST /api/v1/users
    @PutMapping("/{id}")             // PUT /api/v1/users/{id}
    @DeleteMapping("/{id}")          // DELETE /api/v1/users/{id}
    
    // íŠ¹ìˆ˜ ì•¡ì…˜ë„ ì˜ë¯¸ê°€ ëª…í™•
    @PostMapping("/{id}/activate")    // POST /api/v1/users/{id}/activate
    @GetMapping("/search")            // GET /api/v1/users/search
}

// ê´€ë¦¬ ê¸°ëŠ¥ì´ ëª…í™•í•œ Controller
@RestController  
@RequestMapping("/api/v1/management/users")
public class UserManagementController {
    
    @GetMapping("/statistics")        // ê´€ë¦¬ìš© í†µê³„
    @PostMapping("/batch-import")     // ë°°ì¹˜ ê°€ì ¸ì˜¤ê¸°
    @DeleteMapping("/inactive")       // ë¹„í™œì„± ì‚¬ìš©ì ì •ë¦¬
}
```

#### âŒ ë‚˜ìœ ì˜ˆì‹œ
```java
// ì¶•ì•½í˜• ì‚¬ìš© (ê°€ë…ì„± ì €í•˜)
public class UserCtrl { }
public class UsrController { }

// ëª©ì ì´ ë¶ˆë¶„ëª…
public class UserAPI { }
public class UserEndpoint { }
public class UserREST { }

// ì¼ê´€ì„± ì—†ëŠ” ëª…ëª…
public class Users { }              // ë³µìˆ˜í˜•ìœ¼ë¡œë§Œ ëª…ëª…
public class UserHandler { }        // Handler ì ‘ë¯¸ì‚¬
public class UserResource { }       // Resource ì ‘ë¯¸ì‚¬

// ì˜ë¯¸ê°€ ì• ë§¤í•œ ë©”ì„œë“œëª…
@GetMapping("/get")                 // ì¤‘ë³µ ì˜ë¯¸
@PostMapping("/create")             // ì¤‘ë³µ ì˜ë¯¸
@GetMapping("/findUser")            // camelCase URL
```

### 6.2. DTO ëª…ëª…

#### âœ… ì¢‹ì€ ì˜ˆì‹œ
```java
// Request DTO - ìš©ë„ê°€ ëª…í™•
public class UserCreateReq {
    @NotBlank(message = "ì‚¬ìš©ìëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String username;
    
    @Email(message = "ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤")
    private String email;
    
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String password;
}

// Response DTO - ìš©ë„ë³„ êµ¬ë¶„
public class UserRes {              // ê¸°ë³¸ ì‘ë‹µ
    private Long id;
    private String username;
    private String email;
    private UserStatus status;
    private LocalDateTime createdAt;
}

public class UserDetailRes {        // ìƒì„¸ ì‘ë‹µ
    private Long id;
    private String username;
    private String email;
    private UserStatus status;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    private List<RoleRes> roles;    // ì—°ê´€ ë°ì´í„° í¬í•¨
    private ProfileRes profile;
}

public class UserSummaryRes {       // ìš”ì•½ ì‘ë‹µ
    private Long id;
    private String username;
    private UserStatus status;
}

// ê²€ìƒ‰ìš© DTO
public class UserSearchReq {
    private String username;
    private String email;
    private UserStatus status;
    private LocalDate createdAfter;
    private LocalDate createdBefore;
}
```

#### âŒ ë‚˜ìœ ì˜ˆì‹œ
```java
// ìš©ë„ê°€ ë¶ˆë¶„ëª…í•œ DTO
public class UserDTO { }            // Requestì¸ì§€ Responseì¸ì§€ ë¶ˆë¶„ëª…
public class User { }               // Entityì™€ í˜¼ë™
public class UserData { }           // Data ì ‘ë¯¸ì‚¬ ì˜ë¯¸ ë¶ˆë¶„ëª…

// ì¶•ì•½ì´ ê³¼ë„í•˜ê±°ë‚˜ ë¶ˆë¶„ëª…
public class UsrReq { }            // ì¶•ì•½í˜• ê³¼ë„
public class UserRequest { }        // Requestë³´ë‹¤ Req ì„ í˜¸
public class UserResponse { }       // Responseë³´ë‹¤ Res ì„ í˜¸

// ì¼ê´€ì„± ì—†ëŠ” ëª…ëª…
public class CreateUserRequest { }  // [Action][Entity][Type] ìˆœì„œ
public class UserUpdateReq { }      // [Entity][Action][Type] ìˆœì„œ - í˜¼ì¬

// ë„ˆë¬´ ìƒì„¸í•˜ê±°ë‚˜ ê¸¸ì–´ì§„ ëª…ëª…
public class UserManagementControllerCreateUserRequestDTO { }
```

### 6.3. Service ëª…ëª…

#### âœ… ì¢‹ì€ ì˜ˆì‹œ
```java
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class UserService {
    
    // ë©”ì„œë“œëª…ì´ ì—­í• ì„ ëª…í™•íˆ í‘œí˜„
    @Transactional
    public UserRes createUser(UserCreateReq request) { }
    
    public UserRes getUserById(Long id) { }
    
    public Page<UserRes> getAllUsers(Pageable pageable) { }
    
    public Page<UserRes> searchUsers(UserSearchReq searchReq, Pageable pageable) { }
    
    @Transactional
    public UserRes updateUser(Long id, UserUpdateReq request) { }
    
    @Transactional
    public void deleteUser(Long id) { }
    
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë©”ì„œë“œë„ ëª…í™•
    @Transactional
    public UserRes activateUser(Long id) { }
    
    @Transactional
    public void resetPassword(Long id) { }
    
    public boolean existsByUsername(String username) { }
    
    public Map<UserStatus, Long> getUserStatisticsByStatus() { }
}
```

#### âŒ ë‚˜ìœ ì˜ˆì‹œ
```java
@Service
public class UserService {
    
    // ì¼ê´€ì„± ì—†ëŠ” ë©”ì„œë“œëª…
    public UserRes add(UserCreateReq request) { }        // create ëŒ€ì‹  add
    public UserRes find(Long id) { }                     // get ëŒ€ì‹  find
    public UserRes modify(Long id, UserUpdateReq req) { } // update ëŒ€ì‹  modify
    public void remove(Long id) { }                      // delete ëŒ€ì‹  remove
    
    // ì¶•ì•½í˜• ì‚¬ìš©
    public UserRes getUsrById(Long id) { }
    public List<UserRes> getAllUsrs() { }
    
    // ì˜ë¯¸ê°€ ë¶ˆë¶„ëª…í•œ ë©”ì„œë“œëª…
    public UserRes process(UserCreateReq request) { }
    public UserRes handle(Long id) { }
    public void action(Long id) { }
    
    // ë„ˆë¬´ ê¸´ ë©”ì„œë“œëª…
    public UserRes getUserByIdAndCheckActiveStatusAndValidatePermission(Long id) { }
}
```

### 6.4. FeignClient ëª…ëª…

#### âœ… ì¢‹ì€ ì˜ˆì‹œ
```java
// ì—…ë¬´ê·¸ë£¹ë³„ Client ë¶„ë¦¬
@FeignClient(
    name = "sktax-auth-client",
    url = "${sktax.auth.url}",
    configuration = SktAxFeignConfig.class
)
public interface SktAxAuthClient {
    
    @PostMapping("/api/v1/auth/login")
    AccessTokenResponseWithProject loginAccessToken(
        @RequestBody BodyLoginAccessTokenApiV1AuthLoginPost request
    );
    
    @GetMapping("/api/v1/auth/user/info")
    UserInfoResponse getUserInfo(@RequestHeader("Authorization") String token);
}

@FeignClient(
    name = "sktax-modelgateway-client", 
    url = "${sktax.modelgateway.url}",
    configuration = SktAxFeignConfig.class
)
public interface ModelGatewayChatClient {
    
    @PostMapping("/api/v1/chat/completions")
    ChatCompletionResponse createChatCompletion(
        @RequestBody ChatCompletionRequest request
    );
}

// DTOë„ OpenAPI ëª…ì„¸ ê¸°ë°˜ìœ¼ë¡œ ì •í™•íˆ ëª…ëª…
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)
public class BodyLoginAccessTokenApiV1AuthLoginPost {
    private String username;
    private String password;
    @Builder.Default
    private String grantType = "password";
}
```

#### âŒ ë‚˜ìœ ì˜ˆì‹œ
```java
// ì¼ê´€ì„± ì—†ëŠ” Client ëª…ëª…
public interface AuthAPI { }              // API ì ‘ë¯¸ì‚¬
public interface AuthFeign { }             // Feign ì ‘ë¯¸ì‚¬
public interface AuthService { }           // Service ì ‘ë¯¸ì‚¬ (í˜¼ë™)
public interface SktAxAuth { }             // Client ì ‘ë¯¸ì‚¬ ëˆ„ë½

// URLê³¼ Clientëª…ì´ ë¶ˆì¼ì¹˜
@FeignClient(name = "auth-service", url = "${sktax.modelgateway.url}")
public interface AuthClient { }            // URLì€ modelgatewayì¸ë° Clientëª…ì€ Auth

// ë©”ì„œë“œëª…ì´ REST íŒ¨í„´ê³¼ ë¶ˆì¼ì¹˜
@PostMapping("/api/v1/auth/login")
public AccessTokenResponse getToken();     // POSTì¸ë° getìœ¼ë¡œ ì‹œì‘

// DTOëª…ì´ OpenAPI ëª…ì„¸ì™€ ë¶ˆì¼ì¹˜
public class LoginRequest { }              // ì‹¤ì œ OpenAPI ëª…ì„¸ì™€ ë‹¤ë¥¸ ëª…ëª…
public class TokenResponse { }             // ì‹¤ì œ ëª…ì„¸ëŠ” AccessTokenResponse
```

---

## 7. ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš© ì‚¬ë¡€

### 7.1. í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„

#### 7.1.1. ì˜ ì ìš©ëœ ë¶€ë¶„
```java
// âœ… SampleUserController - í‘œì¤€ íŒ¨í„´ ì¤€ìˆ˜
@RestController
@RequestMapping("/api/v1/sample/users")
public class SampleUserController {
    
    // RESTful URL ì„¤ê³„
    @PostMapping                           // POST /api/v1/sample/users
    @GetMapping("/{id}")                   // GET /api/v1/sample/users/{id}
    @GetMapping("/username/{username}")    // GET /api/v1/sample/users/username/{username}
    @GetMapping                           // GET /api/v1/sample/users
    @GetMapping("/status/{status}")       // GET /api/v1/sample/users/status/{status}
    
    // ë©”ì„œë“œëª…ì´ ëª…í™•í•˜ê³  ì¼ê´€ì„± ìˆìŒ
    public ResponseEntity<AxResponse<SampleUserRes>> createUser(...)
    public ResponseEntity<AxResponse<SampleUserRes>> getUserById(...)
    public ResponseEntity<AxResponse<SampleUserRes>> getUserByUsername(...)
    public ResponseEntity<AxResponse<Page<SampleUserRes>>> getAllUsers(...)
}

// âœ… DTO êµ¬ì¡° - Request/Response ë¶„ë¦¬
// /dto/sample/request/
public class SampleUserCreateReq { }
public class SampleUserUpdateReq { }

// /dto/sample/response/
public class SampleUserRes { }

// âœ… FeignClient êµ¬ì¡° - ì—…ë¬´ê·¸ë£¹ë³„ ë¶„ë¦¬
// /client/sktax/auth/
public interface SktAxAuthClient { }
public interface SktAxAuthUsersClient { }
public interface SktAxAuthRolesClient { }

// /client/sktax/modelgateway/
public interface ChatClient { }
public interface CompletionsClient { }
public interface EmbeddingsClient { }
```

#### 7.1.2. ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„
```java
// âš ï¸ ì¼ë¶€ FeignClient DTOëª…ì´ OpenAPI ëª…ì„¸ì™€ ë‹¤ë¦„
// í˜„ì¬: ChatCompletionRequest
// ê¶Œì¥: ì‹¤ì œ OpenAPI operationId ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•œ ëª…ëª… í•„ìš”

// âš ï¸ ì¼ë¶€ Controllerì—ì„œ ì—…ë¬´ê·¸ë£¹ ë¶„ë¥˜ ê°œì„  í•„ìš”
// í˜„ì¬: /controller/common/CorsTestController.java
// ê¶Œì¥: í…ŒìŠ¤íŠ¸ìš©ì´ë¼ë©´ /controller/test/ ë””ë ‰í† ë¦¬ë¡œ ì´ë™

// âš ï¸ FeignClient DTO ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¼ë¶€ ê°œì„  í•„ìš”
// í˜„ì¬: /client/sktax/auth/dto/ (request/response ë¶„ë¦¬ ì•ˆë¨)
// ê¶Œì¥: /client/sktax/auth/dto/request/, /client/sktax/auth/dto/response/
```

### 7.2. ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ ì‹œ ì ìš© ì˜ˆì‹œ

#### 7.2.1. ìƒˆë¡œìš´ ì£¼ë¬¸ ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€
```java
// âœ… í‘œì¤€ ëª…ëª…ê·œì¹™ ì ìš©í•œ ìƒˆë¡œìš´ ê¸°ëŠ¥

// 1. Controller
@RestController
@RequestMapping("/api/v1/orders")
public class OrderController {
    
    @PostMapping
    public ResponseEntity<AxResponse<OrderRes>> createOrder(
        @Valid @RequestBody OrderCreateReq request) { }
    
    @GetMapping("/{id}")
    public ResponseEntity<AxResponse<OrderDetailRes>> getOrderById(
        @PathVariable Long id) { }
        
    @GetMapping
    public ResponseEntity<AxResponse<Page<OrderRes>>> getAllOrders(
        Pageable pageable) { }
        
    @GetMapping("/user/{userId}")
    public ResponseEntity<AxResponse<Page<OrderRes>>> getOrdersByUserId(
        @PathVariable Long userId, Pageable pageable) { }
        
    @GetMapping("/status/{status}")
    public ResponseEntity<AxResponse<Page<OrderRes>>> getOrdersByStatus(
        @PathVariable OrderStatus status, Pageable pageable) { }
        
    @PostMapping("/search")
    public ResponseEntity<AxResponse<Page<OrderRes>>> searchOrders(
        @Valid @RequestBody OrderSearchReq searchReq, Pageable pageable) { }
        
    @PatchMapping("/{id}/status")
    public ResponseEntity<AxResponse<OrderRes>> updateOrderStatus(
        @PathVariable Long id, @RequestParam OrderStatus status) { }
        
    @DeleteMapping("/{id}")
    public ResponseEntity<AxResponse<Void>> cancelOrder(@PathVariable Long id) { }
}

// 2. DTO êµ¬ì¡°
// /dto/order/request/
public class OrderCreateReq { }
public class OrderUpdateReq { }
public class OrderSearchReq { }

// /dto/order/response/
public class OrderRes { }           // ê¸°ë³¸ ì‘ë‹µ
public class OrderDetailRes { }     // ìƒì„¸ ì‘ë‹µ (OrderItem í¬í•¨)
public class OrderSummaryRes { }    // ìš”ì•½ ì‘ë‹µ

// 3. Service
@Service
public class OrderService {
    public OrderRes createOrder(OrderCreateReq request) { }
    public OrderDetailRes getOrderById(Long id) { }
    public Page<OrderRes> getAllOrders(Pageable pageable) { }
    public Page<OrderRes> getOrdersByUserId(Long userId, Pageable pageable) { }
    public OrderRes updateOrderStatus(Long id, OrderStatus status) { }
    public void cancelOrder(Long id) { }
}

// 4. Entity
@Entity
@Table(name = "orders")
public class Order extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private User user;
    
    @Enumerated(EnumType.STRING)
    private OrderStatus status;
    
    @OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
    private List<OrderItem> orderItems;
}

// 5. Repository
@Repository
public interface OrderRepository extends JpaRepository<Order, Long> {
    Page<Order> findByUserId(Long userId, Pageable pageable);
    Page<Order> findByStatus(OrderStatus status, Pageable pageable);
    
    @Query("SELECT o FROM Order o WHERE o.user.id = :userId AND o.status = :status")
    Page<Order> findByUserIdAndStatus(@Param("userId") Long userId, 
                                     @Param("status") OrderStatus status, 
                                     Pageable pageable);
}
```

#### 7.2.2. ìƒˆë¡œìš´ ì™¸ë¶€ ì—°ë™ ì¶”ê°€
```java
// âœ… ìƒˆë¡œìš´ ê²°ì œ ì„œë¹„ìŠ¤ ì—°ë™ ì¶”ê°€

// 1. FeignClient êµ¬ì¡°
// /client/payment/
public interface PaymentClient { }
public interface PaymentWebhookClient { }

// /client/payment/dto/request/
public class PaymentCreateRequest { }
public class PaymentCancelRequest { }

// /client/payment/dto/response/
public class PaymentResponse { }
public class PaymentStatusResponse { }

// /client/payment/dto/
public class PaymentWebhookPayload { }
public class PaymentError { }

// 2. ì‹¤ì œ FeignClient êµ¬í˜„
@FeignClient(
    name = "payment-client",
    url = "${payment.api.url}",
    configuration = PaymentFeignConfig.class
)
public interface PaymentClient {
    
    @PostMapping("/api/v1/payments")
    PaymentResponse createPayment(@RequestBody PaymentCreateRequest request);
    
    @GetMapping("/api/v1/payments/{paymentId}")
    PaymentStatusResponse getPaymentStatus(@PathVariable String paymentId);
    
    @PostMapping("/api/v1/payments/{paymentId}/cancel")
    PaymentResponse cancelPayment(@PathVariable String paymentId,
                                 @RequestBody PaymentCancelRequest request);
}

// 3. ë‚´ë¶€ ì„œë¹„ìŠ¤ì™€ ì—°ë™
@Service
public class PaymentService {
    private final PaymentClient paymentClient;
    private final PaymentMapper paymentMapper;
    
    public PaymentRes processPayment(PaymentReq request) {
        // ë‚´ë¶€ DTO -> ì™¸ë¶€ DTO ë³€í™˜
        PaymentCreateRequest externalRequest = paymentMapper.toExternalRequest(request);
        
        // ì™¸ë¶€ API í˜¸ì¶œ
        PaymentResponse externalResponse = paymentClient.createPayment(externalRequest);
        
        // ì™¸ë¶€ DTO -> ë‚´ë¶€ DTO ë³€í™˜
        return paymentMapper.toInternalResponse(externalResponse);
    }
}
```

---

## ê²°ë¡ 

ë³¸ ëª…ëª…ê·œì¹™ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### ğŸ¯ í•µì‹¬ íš¨ê³¼
1. **ì½”ë“œ ì¼ê´€ì„± í™•ë³´**: íŒ€ ì „ì²´ê°€ ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ ê°œë°œ
2. **ê°€ë…ì„± í–¥ìƒ**: íŒŒì¼ê³¼ ë©”ì„œë“œì˜ ì—­í• ì´ ëª…í™•íˆ êµ¬ë¶„
3. **ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ **: ìƒˆë¡œìš´ íŒ€ì›ë„ ì‰½ê²Œ ì´í•´ ê°€ëŠ¥í•œ êµ¬ì¡°
4. **í™•ì¥ì„± ë³´ì¥**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ì¼ê´€ëœ êµ¬ì¡° ìœ ì§€

### ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] Controller í´ë˜ìŠ¤ëª…ì´ `[ì—…ë¬´ê·¸ë£¹][ë„ë©”ì¸]Controller` íŒ¨í„´ì¸ê°€?
- [ ] HTTP ë©”ì„œë“œì™€ URLì´ RESTful íŒ¨í„´ì„ ë”°ë¥´ëŠ”ê°€?
- [ ] DTOê°€ RequestëŠ” `Req`, ResponseëŠ” `Res` ì ‘ë¯¸ì‚¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€?
- [ ] FeignClientê°€ ì—…ë¬´ê·¸ë£¹ë³„ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆëŠ”ê°€?
- [ ] FeignClient DTOê°€ OpenAPI ëª…ì„¸ì™€ ì¼ì¹˜í•˜ëŠ”ê°€?
- [ ] ë””ë ‰í† ë¦¬ êµ¬ì¡°ê°€ í‘œì¤€ì„ ë”°ë¥´ê³  ìˆëŠ”ê°€?

### ğŸ”„ ì§€ì†ì  ê°œì„ 
ëª…ëª…ê·œì¹™ì€ í”„ë¡œì íŠ¸ ë°œì „ê³¼ í•¨ê»˜ ì§€ì†ì ìœ¼ë¡œ ê°œì„ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. 
ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì´ë‚˜ ë” ë‚˜ì€ íŒ¨í„´ì´ ë°œê²¬ë˜ë©´ íŒ€ ë…¼ì˜ë¥¼ í†µí•´ ë³¸ ê·œì¹™ì„ ì—…ë°ì´íŠ¸í•˜ê² ìŠµë‹ˆë‹¤.
